@page "/"
@inject EventService eventService
@inject NavigationManager NavigationManager
@using EventPlanner.Models;
<h1>Event Planner</h1>

@if (events.Count > 0)
{
    <table>
        <tr>
            <th>Event Name</th>
            <th>Event Date</th>
            <th></th>
        </tr>
        @foreach (var @event in events)
        {
            <tr>
                <td>@@event.EventName</td> 
                <td>@@event.EventDate.ToString("MM/dd/yyyy")</td>
                <button @onclick="@( () => UpdateEvent(@event.EventId) )">Update</button>
            </tr>
        }
    </table>
}
else
{
    <p>No events found!</p>
}

@code {
    private List<Event> events = new List<Event>();

    protected override async Task OnInitializedAsync()
    {
        events = await eventService.GetEventsAsync();
    }

    private void UpdateEvent(int eventId)
    {
        NavigationManager.NavigateTo($"/update/{eventId}");
    }
}

